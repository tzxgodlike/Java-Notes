## 理论知识

    1.复杂分布式体系结构中的应用程序有数十个依赖关系，每个依赖关系在某个时候将不可避免的失败

    2.服务雪崩
        1.多个微服务之间调用的时候，假设微服务A调用微服务B和微服务C，微服务B和微服务C又调用其他的微服务，这就是所谓的 “ 扇出 ” 。
        如果扇出的链路上某个微服务的调用响应时间过长或者不可用，对微服务A 的调用就会占用越来越多的系统资源，进而引起系统崩溃，所谓的 “ 雪崩效应 ”。

        2.对于高流量的应用来说，单一的后端依赖可能会导致所有服务器上的所有资源都在几秒钟内饱和。比失败更糟糕的是，这些应用程序还可能导致服务之间的延迟增加，备份队列，线程和其他系统资源紧张，导致整个系统发生更多的级联故障。这些都表示需要对故障和延迟进行隔离和管理，以便单个依赖关系的失败，不能取消整个应用程序或系统。

        3.所以，通常当你发现一个模块下的某个实例失败后，这时候这个模块依然还会接受流量，然后这个有问题的模块还调用了其他的模块，这样就会发生级联故障，或者叫 雪崩。
        要避免这样的级联故障，就需要有一种链路中断的方案：
        服务降级、服务熔断

    3.Hystrix是一个用于处理分布式系统的延迟和容错的开源库，在分布式系统里，许多依赖不可避免的会调用失败，比如超时、异常等，Hystrix能够保证在一个依赖出问题的情况下，不会导致整体服务失败，避免级联故障，已提高分布式系统的弹性。

    4. 断路器 本身是一种开关装置，当某个服务单元发送故障之后，通过断路器的故障监控（类似熔断保险丝），向调用方返回一个符合预期的、可处理的备选响应（FallBack），而不是长时间的等待或抛出调用方无法处理的异常，这样就保证了服务调用方的线程不会被长时间、不必要地占用，从而避免了故障在分布式系统中的蔓延，乃至雪崩。

## Hystrix重要概念

    1.服务降级 fallback
        1.服务器忙，请稍后再试，不让客户端等待并立刻返回一个友好提示
        2.发生情况：
            1.程序运行异常
            2.超时
            3.服务熔断出发服务降级
            4.线程池、信号量打满也会导致服务降级 

    2.服务熔断 break
        1.类似保险丝达到最大服务访问后，直接拒绝访问，拉闸限电，
        然后调用[服务降级]的方法并返回友好提示
        2.步骤
            1.降级
            2.熔断
            3.恢复调用链路

    3.服务限流flowlimit
        1.秒杀高并发等操作，严禁一窝蜂的过来拥挤，大家排队，一秒钟N个，有序进行


## Hystrix支付微服务构建

    1.新建cloud-provider-hystrix-payment8001
